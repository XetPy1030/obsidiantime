# ObsidianTime

–í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ Django —Å –º–µ–º–∞–º–∏, —á–∞—Ç–æ–º, —Ü–∏—Ç–∞—Ç–∞–º–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å —Å–æ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Å–µ—Ç—è–º–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üé¨ **–õ–æ–∫–∞–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ** (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ MP4, WebM, OGG)
- üí¨ **–ß–∞—Ç –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏** —Å –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è–º–∏ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üñºÔ∏è **–ì–∞–ª–µ—Ä–µ—è –º–µ–º–æ–≤** —Å —Å–∏—Å—Ç–µ–º–æ–π –ª–∞–π–∫–æ–≤/–¥–∏–∑–ª–∞–π–∫–æ–≤ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- üìù **–ö–æ–ª–ª–µ–∫—Ü–∏—è —Ü–∏—Ç–∞—Ç** —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏ –ø–æ–∏—Å–∫–∞
- üîê **–°–∏—Å—Ç–µ–º–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**
- üì± **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** —Å Bootstrap 5
- üöÄ **Docker-ready** –¥–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è
- ‚òÅÔ∏è **AWS S3 / MinIO –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:
```bash
git clone <repository-url>
cd obsidiantime
```

2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install poetry
poetry install
```

3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (—Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env`):
```env
DEBUG=True
SECRET_KEY=your-secret-key-here
ALLOWED_HOSTS=localhost,127.0.0.1

# Database (SQLite –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
DB_ENGINE=django.db.backends.sqlite3
DB_NAME=db.sqlite3

# –î–ª—è PostgreSQL
# DB_ENGINE=django.db.backends.postgresql
# DB_NAME=obsidiantime
# DB_USER=obsidiantime_user
# DB_PASSWORD=your_password
# DB_HOST=localhost
# DB_PORT=5432
```

4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```bash
poetry run python manage.py migrate
poetry run python manage.py createsuperuser
```

5. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:
```bash
poetry run python manage.py setup_initial_data
```

6. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
```bash
poetry run python manage.py runserver
```

### Docker-–∑–∞–ø—É—Å–∫

**–î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (MinIO S3-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ):**
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç —Å MinIO
docker-compose up -d

# –ù–∞—Å—Ç—Ä–æ–π—Ç–µ MinIO bucket
docker-compose exec web python manage.py setup_minio

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
docker-compose exec web python manage.py migrate
docker-compose exec web python manage.py setup_initial_data
```

**–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ (AWS S3):**
```bash
# –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª —Å S3 –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–¥–∞–∫—à–µ–Ω –≤–µ—Ä—Å–∏—é
docker-compose -f docker-compose.prod.yml up -d

# –í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å–æ–∑–¥–∞–π—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
docker-compose -f docker-compose.prod.yml exec web python manage.py migrate
docker-compose -f docker-compose.prod.yml exec web python manage.py setup_initial_data
```

**–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ö—Ä–∞–Ω–∏–ª–∏—â–∞:**

- `docker-compose.yml` - **MinIO S3-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ** (–ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å S3 API)
- `docker-compose.prod.yml` - **AWS S3 —Ö—Ä–∞–Ω–∏–ª–∏—â–µ** (–ø—Ä–æ–¥–∞–∫—à–µ–Ω)

**–î–æ—Å—Ç—É–ø –∫ —Å–µ—Ä–≤–∏—Å–∞–º:**
- –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: http://localhost
- MinIO Console: http://localhost:9001 (obsidiantime / obsidiantime123)
- PostgreSQL: localhost:5432

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ AWS S3 –¥–ª—è –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤

### 1. –°–æ–∑–¥–∞–Ω–∏–µ S3 bucket

1. –í–æ–π–¥–∏—Ç–µ –≤ AWS Console
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ S3 –∏ —Å–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π bucket
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ public access –¥–ª—è –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤
4. –°–æ–∑–¥–∞–π—Ç–µ IAM –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ bucket

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ –≤–∞—à `.env` —Ñ–∞–π–ª:
```env
# AWS S3 Settings
USE_S3=true
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key
AWS_STORAGE_BUCKET_NAME=your-s3-bucket-name
AWS_S3_REGION_NAME=us-east-1
```

### 3. –ü–æ–ª–∏—Ç–∏–∫–∞ IAM –¥–ª—è S3 bucket

```json
{
    "Version": "2012-10-17",
    "Statement": [
        {
            "Effect": "Allow",
            "Action": [
                "s3:GetObject",
                "s3:PutObject",
                "s3:DeleteObject",
                "s3:ListBucket"
            ],
            "Resource": [
                "arn:aws:s3:::your-bucket-name/*",
                "arn:aws:s3:::your-bucket-name"
            ]
        }
    ]
}
```

### 4. –ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–µ–¥–∏–∞ —Ñ–∞–π–ª–æ–≤

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä —Ñ–∞–π–ª–æ–≤ –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏
python manage.py migrate_media_to_s3 --dry-run

# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
python manage.py migrate_media_to_s3
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
obsidiantime/
‚îú‚îÄ‚îÄ obsidiantime/
‚îÇ   ‚îú‚îÄ‚îÄ main/          # –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Ü–∏—Ç–∞—Ç—ã, –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞)
‚îÇ   ‚îú‚îÄ‚îÄ chat/          # –ß–∞—Ç –∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ gallery/       # –ì–∞–ª–µ—Ä–µ—è –º–µ–º–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ config/        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Django
‚îú‚îÄ‚îÄ templates/         # HTML —à–∞–±–ª–æ–Ω—ã
‚îú‚îÄ‚îÄ static/           # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã (CSS, JS, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ Dockerfile
‚îî‚îÄ‚îÄ nginx.conf
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
- URL: `/admin/`
- –õ–æ–≥–∏–Ω: `admin`
- –ü–∞—Ä–æ–ª—å: `admin123`

### –¢–µ—Å—Ç–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- **demo** / `demo123` - –æ–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- **admin** / `admin123` - –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã
- **–ì–ª–∞–≤–Ω–∞—è** (`/`) - –ª–æ–∫–∞–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ –∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ —Å–æ—Ü—Å–µ—Ç–∏
- **–ß–∞—Ç** (`/chat/`) - –æ–±—â–µ–Ω–∏–µ –∏ –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è
- **–ì–∞–ª–µ—Ä–µ—è** (`/gallery/`) - –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –º–µ–º–æ–≤
- **–¶–∏—Ç–∞—Ç—ã** (`/quotes/`) - –∫–æ–ª–ª–µ–∫—Ü–∏—è —Ü–∏—Ç–∞—Ç
- **–û –ø—Ä–æ–µ–∫—Ç–µ** (`/about/`) - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∏–¥–µ–æ

### –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É

1. –í–æ–π–¥–∏—Ç–µ –≤ –∞–¥–º–∏–Ω–∫—É: http://localhost/admin/
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞"
3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤–∏–¥–µ–æ —Ñ–∞–π–ª –≤ –ø–æ–ª–µ "–í–∏–¥–µ–æ –¥–ª—è —Ä–∏–∫—Ä–æ–ª–ª–∞"
4. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã: MP4, WebM, OGG

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –≤–∏–¥–µ–æ

- **–†–∞–∑—Ä–µ—à–µ–Ω–∏–µ**: 1280x720 –∏–ª–∏ 1920x1080
- **–§–æ—Ä–º–∞—Ç**: MP4 (H.264) –¥–ª—è –ª—É—á—à–µ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
- **–†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞**: –¥–æ 50MB –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
- **–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 30-60 —Å–µ–∫—É–Ω–¥ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ

## –ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### Docker –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

1. –û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `docker-compose.yml`:
```yaml
environment:
  - DEBUG=False
  - SECRET_KEY=your-production-secret-key
  - ALLOWED_HOSTS=your-domain.com
  - USE_S3=true
  - AWS_ACCESS_KEY_ID=your-key
  - AWS_SECRET_ACCESS_KEY=your-secret
  - AWS_STORAGE_BUCKET_NAME=your-bucket
```

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ SSL —á–µ—Ä–µ–∑ reverse proxy (nginx, traefik)
3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±—ç–∫–∞–ø—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö PostgreSQL
4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ª–æ–≥–æ–≤ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ PostgreSQL –≤–º–µ—Å—Ç–æ SQLite
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ CDN –¥–ª—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–∞–π–ª–æ–≤
- –í–∫–ª—é—á–∏—Ç–µ SSL/TLS
- –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Sentry, logs)
- –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –∏ S3

## –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```bash
poetry install --with dev
```

### –õ–∏–Ω—Ç–∏–Ω–≥ –∏ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
poetry run ruff check .
poetry run ruff format .
```

### –°–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
```bash
python manage.py makemigrations
python manage.py migrate
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - —Å–º. —Ñ–∞–π–ª LICENSE –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞.
